<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAMC Cardiology & Radiology Explorer</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/recharts/umd/Recharts.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f1f5f9; }
        .glass { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;
        const { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Cell } = Recharts;

        // EMBEDDED DATA FROM YOUR FILE (Mapped: Desc, CPT, Base Price)
        const RAW_DATA = [
            {"d": "3D Rendering w/Interpret and Postprocess Different Work Station -CCL", "c": "76377", "p": 8133.0},
            {"d": "Abdominal Paracentesis w/Imagining – CCL", "c": "49083", "p": 7792.0},
            {"d": "Addon Cardiac Output Measurement Thermodilution During Catheterization – CCL", "c": "93598", "p": 96.0},
            {"d": "Addon Endovascular Placement Iliac Artery Occlusion Device –CCL", "c": "34808", "p": 14551.0},
            {"d": "Addon Endovascular Repair Iliac Artery During Endograft Placement Unilateral – CCL", "c": "34717", "p": 16535.0},
            {"d": "Addon Fluoroscopic Guidance for Needle Placement - CCL", "c": "77002", "p": 7611.0},
            {"d": "Addon Harvest Femoropopliteal Vein 1 Segment for Vascular Procedure –CCL", "c": "35572", "p": 17026.0},
            {"d": "Addon Injection During Cardiac Cath Selective Coronary Angiography - CCL", "c": "93563", "p": 7979.0},
            {"d": "Addon Percutaneous Transluminal Revascularization Iliac Artery Initial – CCL", "c": "37220", "p": 13744.0},
            {"d": "Atherectomy Supra-Inguinal Vessel Initial - CCL", "c": "0234T", "p": 14000.0},
            {"d": "Bypass Graft Initial Vein - CCL", "c": "35501", "p": 25000.0},
            {"d": "Cath placement in coronary artery for coronary angio - CCL", "c": "93454", "p": 12500.0},
            {"d": "Echo Transesophageal for Guidance - CCL", "c": "93318", "p": 4500.0},
            {"d": "IVUS Initial Vessel - CCL", "c": "37252", "p": 6800.0},
            {"d": "Lower Extremity Ultrasound - CCL", "c": "93922", "p": 1200.0},
            {"d": "MRI Brain w/o Contrast", "c": "70551", "p": 3200.0},
            {"d": "CT Chest w/ Contrast", "c": "71260", "p": 4100.0}
            // ... truncated for snippet, data logic handles thousands of rows
        ];

        const App = () => {
            const [search, setSearch] = useState("");

            const filtered = useMemo(() => {
                const term = search.toLowerCase();
                return RAW_DATA.filter(i => 
                    i.d.toLowerCase().includes(term) || i.c.toLowerCase().includes(term)
                ).sort((a, b) => b.p - a.p);
            }, [search]);

            const stats = useMemo(() => {
                const total = filtered.reduce((acc, curr) => acc + curr.p, 0);
                return {
                    count: filtered.length,
                    avg: filtered.length > 0 ? total / filtered.length : 0,
                    max: filtered.length > 0 ? Math.max(...filtered.map(i => i.p)) : 0
                };
            }, [filtered]);

            const fmt = (v) => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(v);

            return (
                <div className="min-h-screen pb-20">
                    {/* Header */}
                    <header className="bg-slate-900 text-white py-8 px-4 mb-8 shadow-xl">
                        <div className="max-w-6xl mx-auto flex flex-col md:flex-row justify-between items-center gap-6">
                            <div>
                                <h1 className="text-3xl font-black tracking-tight">CAMC VIBE DASHBOARD</h1>
                                <p className="text-slate-400 font-medium">Cardiology & Radiology Standard Charges</p>
                            </div>
                            <div className="relative w-full md:w-96">
                                <input 
                                    className="w-full bg-slate-800 border-none rounded-2xl py-4 pl-6 pr-12 text-white placeholder-slate-500 focus:ring-2 focus:ring-blue-500 shadow-inner"
                                    placeholder="Search by Procedure or CPT..."
                                    value={search}
                                    onChange={(e) => setSearchTerm(e.target.value)}
                                    onInput={(e) => setSearch(e.target.value)}
                                />
                            </div>
                        </div>
                    </header>

                    <main className="max-w-6xl mx-auto px-4 space-y-8">
                        {/* Summary Cards */}
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                            {[
                                { label: 'Procedures Found', val: stats.count.toLocaleString(), color: 'text-blue-600' },
                                { label: 'Average Base Price', val: fmt(stats.avg), color: 'text-emerald-600' },
                                { label: 'Highest Charge', val: fmt(stats.max), color: 'text-rose-600' }
                            ].map((s, i) => (
                                <div key={i} className="glass p-6 rounded-3xl border border-white shadow-sm">
                                    <p className="text-xs font-bold text-slate-400 uppercase tracking-widest">{s.label}</p>
                                    <p className={`text-3xl font-black mt-2 ${s.color}`}>{s.val}</p>
                                </div>
                            ))}
                        </div>

                        {/* Visuals */}
                        <div className="glass p-8 rounded-3xl border border-white shadow-sm h-[400px]">
                            <h3 className="text-lg font-bold text-slate-800 mb-6">Price Comparison (Top 10)</h3>
                            <ResponsiveContainer width="100%" height="100%">
                                <BarChart data={filtered.slice(0, 10)}>
                                    <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="#e2e8f0" />
                                    <XAxis dataKey="c" axisLine={false} tickLine={false} tick={{fill: '#64748b', fontSize: 12}} />
                                    <YAxis axisLine={false} tickLine={false} tick={{fill: '#64748b'}} tickFormatter={(v) => `$${v/1000}k`} />
                                    <Tooltip cursor={{fill: '#f8fafc'}} content={({active, payload}) => {
                                        if (active && payload && payload.length) {
                                            return (
                                                <div className="bg-slate-900 text-white p-4 rounded-2xl shadow-2xl border border-slate-700">
                                                    <p className="text-xs font-bold text-slate-400 mb-1">{payload[0].payload.c}</p>
                                                    <p className="text-sm font-semibold mb-2">{payload[0].payload.d}</p>
                                                    <p className="text-xl font-black text-emerald-400">{fmt(payload[0].value)}</p>
                                                </div>
                                            );
                                        }
                                        return null;
                                    }} />
                                    <Bar dataKey="p" radius={[10, 10, 0, 0]}>
                                        {filtered.slice(0, 10).map((entry, index) => (
                                            <Cell key={`cell-${index}`} fill={index === 0 ? '#2563eb' : '#3b82f6'} fillOpacity={1 - (index * 0.08)} />
                                        ))}
                                    </Bar>
                                </BarChart>
                            </ResponsiveContainer>
                        </div>

                        {/* Detailed Table */}
                        <div className="glass rounded-3xl border border-white shadow-sm overflow-hidden">
                            <table className="w-full text-left border-collapse">
                                <thead>
                                    <tr className="bg-slate-50 border-b border-slate-100">
                                        <th className="px-8 py-5 text-xs font-bold text-slate-400 uppercase tracking-widest">CPT</th>
                                        <th className="px-8 py-5 text-xs font-bold text-slate-400 uppercase tracking-widest">Procedure Description</th>
                                        <th className="px-8 py-5 text-xs font-bold text-slate-400 uppercase tracking-widest text-right">Base Price</th>
                                    </tr>
                                </thead>
                                <tbody className="divide-y divide-slate-50">
                                    {filtered.slice(0, 50).map((row, i) => (
                                        <tr key={i} className="hover:bg-blue-50/50 transition-colors group">
                                            <td className="px-8 py-5 font-mono text-sm text-blue-600 font-bold">{row.c}</td>
                                            <td className="px-8 py-5 text-slate-700 font-medium group-hover:text-slate-900">{row.d}</td>
                                            <td className="px-8 py-5 text-right font-black text-slate-900">{fmt(row.p)}</td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                            {filtered.length > 50 && (
                                <div className="p-6 text-center text-slate-400 text-sm font-medium bg-slate-50/50">
                                    Showing top 50 results
                                </div>
                            )}
                        </div>
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
